{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/washington/code/nlw-03-projeto-happy/mobile/src/pages/CreateOrphanage/OrphanageData/index.tsx\";\n\nimport { Feather } from '@expo/vector-icons';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport React, { useState } from 'react';\nimport { Switch } from 'react-native-gesture-handler';\nimport * as ImagePicker from 'expo-image-picker';\nimport api from \"../../../services/api\";\nimport { Container, Title, Label, Input, Error, UploadedImagesContainer, ImagePreview, ImagesInput, SwitchContainer, NextButton, NextButtonText } from \"./styles\";\n\nvar OrphanageData = function OrphanageData() {\n  var navigation = useNavigation();\n  var route = useRoute();\n  var params = route.params;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      about = _useState4[0],\n      setAbout = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      instructions = _useState6[0],\n      setInstructions = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      whatsapp = _useState8[0],\n      setWhatsapp = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      openning_hours = _useState10[0],\n      setOpenningHours = _useState10[1];\n\n  var _useState11 = useState(true),\n      _useState12 = _slicedToArray(_useState11, 2),\n      open_on_weekends = _useState12[0],\n      setOpenOnWeekends = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      images = _useState14[0],\n      setImages = _useState14[1];\n\n  var _useState15 = useState({}),\n      _useState16 = _slicedToArray(_useState15, 2),\n      trimmedErrors = _useState16[0],\n      setTrimmedErros = _useState16[1];\n\n  function handleCreateOrphanage() {\n    var _params$position = params.position,\n        latitude = _params$position.latitude,\n        longitude = _params$position.longitude;\n    var data = new FormData();\n    data.append('name', name);\n    data.append('about', about);\n    data.append('instructions', instructions);\n    data.append('whatsapp', whatsapp);\n    data.append('openning_hours', openning_hours);\n    data.append('open_on_weekends', open_on_weekends.toString());\n    data.append('latitude', latitude.toString());\n    data.append('longitude', longitude.toString());\n    images.forEach(function (image, index) {\n      data.append('images', {\n        name: \"image_\" + index + \".jpg\",\n        type: 'image/jpg',\n        uri: image\n      });\n    });\n    api.post('/orphanages', data).then(function () {\n      alert('Orfanato criado com sucesso!');\n      navigation.navigate('OrphanagesMap');\n    }).catch(function (err) {\n      if (err.response.status === 400) {\n        var errors = err.response.data.errors;\n        var errorsLength = Object.keys(errors).length;\n\n        if (errors.latitude) {\n          errorsLength -= 1;\n        }\n\n        setTrimmedErros(errors);\n        alert(\"Percebemos \" + errorsLength + \" \" + (errorsLength === 1 ? 'erro' : 'erros') + \" ao validar suas informa\\xE7\\xF5es. Cheque seu formul\\xE1rio.\");\n      } else {\n        console.log(err.response.data);\n        alert('Ocorreu um erro interno ao receber seu cadastro. Tente novamente mais tarde.');\n      }\n    });\n  }\n\n  function handleSelectImages() {\n    var result, image;\n    return _regeneratorRuntime.async(function handleSelectImages$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              allowsEditing: true,\n              quality: 1,\n              mediaTypes: ImagePicker.MediaTypeOptions.Images\n            }));\n\n          case 2:\n            result = _context.sent;\n\n            if (!result.cancelled) {\n              _context.next = 5;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 5:\n            image = result.uri;\n            setImages([].concat(_toConsumableArray(images), [image]));\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return React.createElement(Container, {\n    contentContainerStyle: {\n      padding: 24\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 5\n    }\n  }, React.createElement(Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, \"Dados\"), React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, \"Nome\"), React.createElement(Input, {\n    returnKeyType: \"next\",\n    value: name,\n    onChangeText: setName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }), React.createElement(Error, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, trimmedErrors.name), React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, \"Sobre\"), React.createElement(Input, {\n    returnKeyType: \"next\",\n    style: {\n      height: 110\n    },\n    multiline: true,\n    value: about,\n    onChangeText: setAbout,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }), React.createElement(Error, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, trimmedErrors.about), React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, \"Whatsapp\"), React.createElement(Input, {\n    returnKeyType: \"done\",\n    keyboardType: \"numeric\",\n    value: whatsapp,\n    onChangeText: setWhatsapp,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }), React.createElement(Error, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }, trimmedErrors.whatsapp), React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, \"Fotos\"), React.createElement(UploadedImagesContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, images.map(function (image) {\n    return React.createElement(ImagePreview, {\n      key: image,\n      source: {\n        uri: image\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 18\n      }\n    });\n  })), React.createElement(ImagesInput, {\n    onPress: handleSelectImages,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }\n  }, React.createElement(Feather, {\n    name: \"plus\",\n    size: 24,\n    color: \"#15B6D6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  })), React.createElement(Error, {\n    style: {\n      marginTop: -20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }, trimmedErrors.images), React.createElement(Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }, \"Visita\\xE7\\xE3o\"), React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, \"Instru\\xE7\\xF5es\"), React.createElement(Input, {\n    returnKeyType: \"next\",\n    style: {\n      height: 110\n    },\n    multiline: true,\n    value: instructions,\n    onChangeText: setInstructions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }\n  }), React.createElement(Error, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, trimmedErrors.instructions), React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }, \"Horario de visitas\"), React.createElement(Input, {\n    returnKeyType: \"done\",\n    value: openning_hours,\n    onChangeText: setOpenningHours,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }\n  }), React.createElement(Error, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }, trimmedErrors.openning_hours), React.createElement(SwitchContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }, React.createElement(Label, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, \"Aberto aos fins de semana?\"), React.createElement(Switch, {\n    thumbColor: \"#fff\",\n    trackColor: {\n      false: '#ccc',\n      true: '#39CC83'\n    },\n    style: {\n      marginLeft: 20\n    },\n    value: open_on_weekends,\n    onValueChange: setOpenOnWeekends,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  })), React.createElement(Error, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }\n  }, trimmedErrors.open_on_weekends), React.createElement(NextButton, {\n    onPress: handleCreateOrphanage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }\n  }, React.createElement(NextButtonText, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }\n  }, \"Cadastrar\")));\n};\n\nexport default OrphanageData;","map":{"version":3,"sources":["/Users/washington/code/nlw-03-projeto-happy/mobile/src/pages/CreateOrphanage/OrphanageData/index.tsx"],"names":["Feather","useNavigation","useRoute","React","useState","Switch","ImagePicker","api","Container","Title","Label","Input","Error","UploadedImagesContainer","ImagePreview","ImagesInput","SwitchContainer","NextButton","NextButtonText","OrphanageData","navigation","route","params","name","setName","about","setAbout","instructions","setInstructions","whatsapp","setWhatsapp","openning_hours","setOpenningHours","open_on_weekends","setOpenOnWeekends","images","setImages","trimmedErrors","setTrimmedErros","handleCreateOrphanage","position","latitude","longitude","data","FormData","append","toString","forEach","image","index","type","uri","post","then","alert","navigate","catch","err","response","status","errors","errorsLength","Object","keys","length","console","log","handleSelectImages","launchImageLibraryAsync","allowsEditing","quality","mediaTypes","MediaTypeOptions","Images","result","cancelled","padding","height","map","marginTop","false","true","marginLeft"],"mappings":"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","sourcesContent":["import { Feather } from '@expo/vector-icons';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport React, { useState } from 'react';\nimport { Switch } from 'react-native-gesture-handler';\nimport * as ImagePicker from 'expo-image-picker';\nimport api from '../../../services/api';\n\nimport {\n  Container,\n  Title,\n  Label,\n  Input,\n  Error,\n  UploadedImagesContainer,\n  ImagePreview,\n  ImagesInput,\n  SwitchContainer,\n  NextButton,\n  NextButtonText,\n} from './styles';\n\ninterface OrphanageDataRouteParams {\n  position: {\n    latitude: number;\n    longitude: number;\n  };\n}\n\ninterface ErrorMessage {\n  [key: string]: string[];\n}\n\nconst OrphanageData: React.FC = () => {\n  const navigation = useNavigation();\n  const route = useRoute();\n  const params = route.params as OrphanageDataRouteParams;\n\n  const [name, setName] = useState('');\n  const [about, setAbout] = useState('');\n  const [instructions, setInstructions] = useState('');\n  const [whatsapp, setWhatsapp] = useState('');\n  const [openning_hours, setOpenningHours] = useState('');\n  const [open_on_weekends, setOpenOnWeekends] = useState(true);\n  const [images, setImages] = useState([]);\n\n  const [trimmedErrors, setTrimmedErros] = useState<ErrorMessage>(\n    {} as ErrorMessage,\n  );\n\n  function handleCreateOrphanage() {\n    const { latitude, longitude } = params.position;\n\n    const data = new FormData();\n\n    data.append('name', name);\n    data.append('about', about);\n    data.append('instructions', instructions);\n    data.append('whatsapp', whatsapp);\n    data.append('openning_hours', openning_hours);\n    data.append('open_on_weekends', open_on_weekends.toString());\n    data.append('latitude', latitude.toString());\n    data.append('longitude', longitude.toString());\n    images.forEach((image, index) => {\n      data.append('images', {\n        name: `image_${index}.jpg`,\n        type: 'image/jpg',\n        uri: image,\n      } as any);\n    });\n\n    api\n      .post('/orphanages', data)\n      .then(() => {\n        alert('Orfanato criado com sucesso!');\n        navigation.navigate('OrphanagesMap');\n      })\n      .catch(err => {\n        if (err.response.status === 400) {\n          const { errors } = err.response.data;\n\n          let errorsLength = Object.keys(errors).length;\n\n          if (errors.latitude) {\n            errorsLength -= 1;\n          }\n\n          setTrimmedErros(errors);\n\n          alert(\n            `Percebemos ${errorsLength} ${\n              errorsLength === 1 ? 'erro' : 'erros'\n            } ao validar suas informações. Cheque seu formulário.`,\n          );\n        } else {\n          console.log(err.response.data);\n          alert(\n            'Ocorreu um erro interno ao receber seu cadastro. Tente novamente mais tarde.',\n          );\n        }\n      });\n  }\n\n  async function handleSelectImages() {\n    const result = await ImagePicker.launchImageLibraryAsync({\n      allowsEditing: true,\n      quality: 1,\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n    });\n\n    if (result.cancelled) {\n      return;\n    }\n\n    const { uri: image } = result;\n\n    setImages([...images, image]);\n  }\n\n  return (\n    <Container contentContainerStyle={{ padding: 24 }}>\n      <Title>Dados</Title>\n\n      <Label>Nome</Label>\n      <Input returnKeyType=\"next\" value={name} onChangeText={setName} />\n      <Error>{trimmedErrors.name}</Error>\n\n      <Label>Sobre</Label>\n      <Input\n        returnKeyType=\"next\"\n        style={{ height: 110 }}\n        multiline\n        value={about}\n        onChangeText={setAbout}\n      />\n      <Error>{trimmedErrors.about}</Error>\n\n      <Label>Whatsapp</Label>\n      <Input\n        returnKeyType=\"done\"\n        keyboardType=\"numeric\"\n        value={whatsapp}\n        onChangeText={setWhatsapp}\n      />\n      <Error>{trimmedErrors.whatsapp}</Error>\n\n      <Label>Fotos</Label>\n      <UploadedImagesContainer>\n        {images.map(image => {\n          return <ImagePreview key={image} source={{ uri: image }} />;\n        })}\n      </UploadedImagesContainer>\n      <ImagesInput onPress={handleSelectImages}>\n        <Feather name=\"plus\" size={24} color=\"#15B6D6\" />\n      </ImagesInput>\n      <Error style={{ marginTop: -20 }}>{trimmedErrors.images}</Error>\n\n      <Title>Visitação</Title>\n\n      <Label>Instruções</Label>\n      <Input\n        returnKeyType=\"next\"\n        style={{ height: 110 }}\n        multiline\n        value={instructions}\n        onChangeText={setInstructions}\n      />\n      <Error>{trimmedErrors.instructions}</Error>\n\n      <Label>Horario de visitas</Label>\n      <Input\n        returnKeyType=\"done\"\n        value={openning_hours}\n        onChangeText={setOpenningHours}\n      />\n      <Error>{trimmedErrors.openning_hours}</Error>\n\n      <SwitchContainer>\n        <Label>Aberto aos fins de semana?</Label>\n        <Switch\n          thumbColor=\"#fff\"\n          trackColor={{ false: '#ccc', true: '#39CC83' }}\n          style={{ marginLeft: 20 }}\n          value={open_on_weekends}\n          onValueChange={setOpenOnWeekends}\n        />\n      </SwitchContainer>\n      <Error>{trimmedErrors.open_on_weekends}</Error>\n\n      <NextButton onPress={handleCreateOrphanage}>\n        <NextButtonText>Cadastrar</NextButtonText>\n      </NextButton>\n    </Container>\n  );\n};\n\nexport default OrphanageData;\n"]},"metadata":{},"sourceType":"module"}